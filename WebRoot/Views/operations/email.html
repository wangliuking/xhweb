<!DOCTYPE html>
<html>
<head>
<title>站内信</title>
<meta name="keywords" content="keyword1,keyword2,keyword3">
<meta name="description" content="this is my page">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta http-equiv="X-UA-Compatible" content="IE=9" />
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-Control" content="no-cache">
<meta http-equiv="Expires" content="-1">
<script type="text/javascript"
	src="../../Resources/js/xhbootstrap-css.js"></script>
<!--[if lte IE 9]>
<script src="../../Resources/js/jquery-1.8.3.min.js"></script>
<script src="../../Resources/js/respond.min.js"></script>
<script src="../../Resources/js/html5shiv.js"></script>
<![endif]-->
<style type="text/css">
.type-div{

}
.type-div li{
 padding:5px;
 margin-top:3px;
 cursor:pointer;
 border:1px solid #cccccc;
}
.type-div li:hover{
 background:#ccc;
}
.type-div li.active{
 background:#ccc;
}
</style>
</head>
<body ng-app="app" ng-controller="user"
	class="fixed-iframe">
	<!-- splash screen-->
	<div class="splash">
		<div class="splash-title">
			<h1>系统正在努力加载中，请耐心等待</h1>
			<div class="spinner">
				<div class="rect1"></div>
				<div class="rect2"></div>
				<div class="rect3"></div>
				<div class="rect4"></div>
				<div class="rect5"></div>
			</div>
		</div>
	</div>
	<!-- 中间内容体 -->
	<div id="wrapper">
		 <div class="small-header transition animated fadeIn">
			<div class="title-panel">
				<div class="panel-body">
					<div id="hbreadcrumb" class="pull-left">
						<ol class="hbreadcrumb breadcrumb">
							<li><span>当前位置：</span></li>
							<li><span>个人中心</span></li>
							<li class="active"><span>站内信</span></li>
						</ol>
					</div>
				</div>
			</div>
		</div> 
		<div class="content animate-panel">
			<!-- row -->
			<div class="row">
			    <div class="col-md-2">
			    <div class="hpanel">
					<div class="panel-heading hbuilt">
							
								邮件类型</div>
						<div class="panel-body">
						<ul ng-if="emailTypeData!=''" class="type-div">
						<li style="color:green" ng-click="searchEmail('')" ng-class="{'active':emailType==''}"> 所有邮件</li>
						<li ng-repeat="x in emailTypeData" ng-click="searchEmail(x.title)" ng-class="{'active':emailType==x.title}">{{x.title}}</li>
						</ul>
						<p ng-if="emailTypeData==''">当前没有数据</p>
						
						</div>
						</div>
			    </div>
				<div class="col-md-10">
					<div class="hpanel">
					<div class="panel-heading hbuilt">
								<!-- <div class="panel-tools">
								<a class="showhide"><i class="fa fa-chevron-up"></i></a> <a
									class="closebox"><i class="fa fa-times"></i></a>
							</div> -->
								系统站内信列表</div>
						<div class="panel-body">
							<!-- row -->
							<div id="search-div">
								<div class="btn-group pull-left" style="padding-top:2px;padding-bottom:2px;">
									<button class="btn btn-danger btn-sm" onclick="xh.delMore()"
										ng-disabled="">
										<i class="fa fa-trash"></i>&nbsp;批量删除邮件
									</button>
									<button class="btn btn-info btn-sm" ng-disabled=""
										onclick="xh.setReaded()">
										<i class="fa fa-edit"></i>&nbsp;标记为已读
									</button>
									<button class="btn btn-success btn-sm" ng-disabled=""
                                       ng-click="hasRead(1)">&nbsp;已读邮件
                                    </button>
                                    <button class="btn btn-danger btn-sm" ng-disabled=""
                                        ng-click="hasRead(0)">&nbsp;未读邮件
                                    </button>
									<button class="btn btn-warning btn-sm" ng-click="search(1)">
										&nbsp;全部邮件
									</button>
								</div>
							</div>
							<!-- row -->
							<table id="tb-info" class="xh-table table-hover">
								<thead>
									<tr class="tr-gray">
										<th width="30px"><input type="checkbox"
											id="table-checkbox" class="table-check" /></th>
										<th width="80px">状态</th>
										<th width="180px">发件人</th>
										<th width="150px">标题</th>
										<th style="break-word:break-all;word-wrap: break-word; ">内容</th>
										<th width="150px">发件时间</th>
										<th width="130px">操作</th>
									</tr>
								</thead>
								<tbody>
									<tr ng-if="totals==0">
										<td colspan="7" class="text-center">没有记录！</td>
									</tr>
									<tr ng-repeat="x in data">
										<td><input type="checkbox" name="tb-check"
											value="{{x.id}}" index="{{$index}}" /></td>
										<td ng-if="x.status==0" style="font-weight: bold;" class="text-success"><i class="fa fa-envelope"></i>&nbsp;未读</td>
										<td ng-if="x.status==1"><i class="fa fa-envelope"></i>&nbsp;已读</td>
										<td>{{x.userName}}</td>
										<td>{{x.title}}</td>
										<td>
										<a href="#"  ng-click="tolocation($index)">{{x.content}}</a>
										</td>
										<td>{{x.time}}</td>
										<td style="width:20px;text-align:center">
										
										<a href="#"
											ng-click="detail($index)" data-toggle="modal"
											data-target="#detail" >
											<i class="fa fa-file-text-o text-success"></i>&nbsp;详情
											</a>
										
										<a href="#"
											ng-click="del(x.id)"><i
												class="fa fa-trash text-success"></i>&nbsp;删除</a></td>
									</tr>
								</tbody>
							</table>
							<div class="page">
								<div class="page-info">
									每页显示 <select id="page-limit" ng-change="refresh()"
										ng-model="count">
										<option value="15">15</option>
										<option value="20">20</option>
										<option value="30">30</option>
										<option value="40">40</option>
										<option value="50">50</option>
									</select> 条, <span ng-model="index">显示{{start}}-</span><span
										ng-model="lastIndex">{{lastIndex}}条,</span> <span
										ng-model="totals">总计{{totals}}条</span>
								</div>
								<div class="page-paging"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- row/ -->
	</div>
	<!-- 中间内容体 /-->
	<div ng-include="'email-detail.html'"></div>
	<div class="scroll-top text-info animated fadeIn scroll-top-hide">
		<i class="fa fa-chevron-circle-up fa-3x"></i>
	</div>
	<script type="text/javascript"
		src="../../Resources/js/xhbootstrap-js.js"></script>
	<script type="text/javascript"
		src="../../lib/metisMenu/dist/metisMenu.min.js"></script>
	<script type="text/javascript"
		src="../../Controllers/operations/email.js"></script>
	<script type="text/javascript">
		xh.load();
	</script>
</body>
</html>
